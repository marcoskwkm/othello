(this.webpackJsonpsandbox=this.webpackJsonpsandbox||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(15),i=n.n(a),u=n(3),o=n(6),l=n(28),s=n(30),f=n(29),b=n(16),j=n(17),d=n(18),h=n(19),v=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).name="InvalidMoveError",e}return n}(Object(h.a)(Error)),O=function(){var e=Object(o.a)(new Array(8)).map((function(){return Object(o.a)(new Array(8)).map((function(){return"empty"}))}));return e[3][3]=e[4][4]="white",e[3][4]=e[4][3]="black",e},m=function(e){return"black"===e?"white":"black"},w=function(e,t){return 0<=e&&e<=7&&0<=t&&t<=7},x=function(e,t,n,r){if("empty"!==e[n][r])throw new v;if(!w(n,r))throw new v;var c=Object(l.a)([-1,-1,-1,0,1,1,1,0],[-1,0,1,1,1,0,-1,-1]),a=Object(s.a)(e);if(c.forEach((function(c){var i=Object(u.a)(c,2),o=i[0],l=i[1],s=n+o,f=r+l;if(w(s,f)&&e[s][f]===m(t)){do{var b=[s+o,f+l];s=b[0],f=b[1]}while(w(s,f)&&e[s][f]===m(t));if(w(s,f)&&e[s][f]===t){var j=[s-o,f-l];for(s=j[0],f=j[1];e[s][f]===m(t);){a[s][f]=t;var d=[s-o,f-l];s=d[0],f=d[1]}a[n][r]=t}}})),Object(f.a)(e,a))throw new v;return a},p=function(e,t,n,r){try{return x(e,t,n,r),!0}catch(c){return c instanceof v||console.error(c),!1}},k=function(e,t){for(var n=[],r=0;r<8;r++)for(var c=0;c<8;c++)p(e,t,r,c)&&n.push([r,c]);return n},g=function(e,t){return k(e,t).length},y=function(e){return function(t,n){for(var r=-1,c=-1,a=-1/0,i=0;i<8;i++)for(var u=0;u<8;u++)try{var o=x(t,n,i,u),l=e(k(o,n),k(o,m(n)));l>a&&(a=l,r=i,c=u)}catch(s){s instanceof v||console.error(s)}return[r,c]}},N=(y((function(e,t){return e.length-t.length})),y((function(e,t){return-t.length})),function(e,t,n){for(var r=!0,c=0;c<=t;c++)for(var a=0;a<=n;a++)e[c][a]!==e[t][n]&&(r=!1);if(r)return!0;r=!0;for(var i=0;i<=t;i++)for(var u=n;u<=7;u++)e[i][u]!==e[t][n]&&(r=!1);if(r)return!0;r=!0;for(var o=t;o<=7;o++)for(var l=0;l<=n;l++)e[o][l]!==e[t][n]&&(r=!1);if(r)return!0;r=!0;for(var s=t;s<=7;s++)for(var f=n;f<=7;f++)e[s][f]!==e[t][n]&&(r=!1);return!!r}),M=function(e,t){var n=g(e,t);[[0,0],[0,7],[7,0],[7,7]].forEach((function(r){var c=Object(u.a)(r,2),a=c[0],i=c[1];e[a][i]===t&&(n+=10)}));for(var r=0;r<8;r++)for(var c=0;c<8;c++)e[r][c]===t&&N(e,r,c)&&(n+=2);return n},C=function(e,t){return e.flat().filter((function(e){return e===t})).length},E=function(e){return 0===g(e,"black")&&0===g(e,"white")},I=n(10),S=n.n(I),A=n(0),B=function(e){return Object(A.jsx)("button",{className:S()("w-full rounded-md bg-green-500",{"p-1":"empty"!==e.state,"pb-full":"empty"===e.state}),disabled:"empty"!==e.state,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:"empty"!==e.state?Object(A.jsx)("div",{className:S()("rounded-full pb-full w-full",{"bg-white":"white"===e.state,"bg-black":"black"===e.state})}):null})},J=function(e){return Object(A.jsx)("div",{className:S()("p-2 rounded-md bg-black grid grid-template-rows grid-cols-board gap-2",e.className),children:Object(o.a)(new Array(8)).map((function(t,n){return Object(o.a)(new Array(8)).map((function(t,r){return Object(A.jsx)(B,{state:e.boardState[n][r],onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e,n,r)}},8*n+r)}))}))})},T=function(e,t){var n=e.flat().map((function(e){return"black"===e?"b":"white"===e?"w":"e"})).join(""),r=window.Module.ccall("computeNextMove","string",["string","number"],[n,"black"===t?0:1]).split(" ").map((function(e){return parseInt(e)})),c=Object(u.a)(r,2);return[c[0],c[1]]},W=function(e){return"pre-black"===e?"black":"pre-white"===e?"white":e},G=function(){var e=Object(r.useState)("black"),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)((function(){return O()})),i=Object(u.a)(a,2),o=i[0],l=i[1],s=Object(r.useState)(null),f=Object(u.a)(s,2),b=f[0],j=f[1],d=Object(r.useCallback)((function(e,t){if("black"===n||"white"===n){var r=x(o,n,e,t);l(r);var a=g(r,m(n))>0?m(n):n;c("white"===a&&null!==T?"pre-white":a)}}),[o,n]),h=Object(r.useMemo)((function(){return g(o,W(n))}),[o,n]),w=Object(r.useMemo)((function(){return E(o)}),[o]),p=Object(r.useMemo)((function(){return C(o,"black")}),[o]),k=Object(r.useMemo)((function(){return C(o,"white")}),[o]),y=Object(r.useMemo)((function(){return function(e){if(E(e)){var t=C(e,"black"),n=C(e,"white");return t>n?-1e6*(t-n):n>t?1e6*(n-t):0}return M(e,"white")-M(e,"black")}(o)}),[o]);Object(r.useEffect)((function(){if(!w)if("white"===n&&null!==T){var e=T(o,n),t=Object(u.a)(e,2),r=t[0],c=t[1];d(r,c)}else{}}),[w,o,n,d]),Object(r.useEffect)((function(){w||("pre-white"===n?setTimeout((function(){return c("white")}),500):"pre-black"===n&&setTimeout((function(){return c("black")}),500))}),[w,n]);return Object(A.jsxs)("div",{className:"w-full max-w-screen-md border",children:[Object(A.jsx)("div",{className:"text-2xl text-center",children:"Othello bot"}),Object(A.jsx)("div",{className:"text-right text-sm",children:"Because the AI from Nintendo's Clubhouse 51 is too stronk"}),Object(A.jsxs)("div",{className:"mt-4 flex justify-around",children:[Object(A.jsxs)("span",{children:["Next turn: ",W(n)," (",h," legal moves)"]}),Object(A.jsxs)("span",{children:["Eval: ",y>0?"+":"",y]}),Object(A.jsx)("button",{className:"px-2 border rounded-md bg-gray-200 hover:bg-gray-300",onClick:function(){return c("black"),l(O()),void j(null)},children:"Reset"})]}),Object(A.jsx)(J,{boardState:o,onClick:function(e,t){if("white"!==n||null===T){j(null);try{d(e,t)}catch(r){r instanceof v?j("Invalid move"):console.error(r)}}}}),Object(A.jsxs)("div",{className:"flex justify-around",children:[Object(A.jsxs)("span",{children:["White: ",k]}),Object(A.jsxs)("span",{children:["Black: ",p]})]}),w&&Object(A.jsxs)("div",{className:"text-center font-bold",children:["Game over!"," ",k>p?"White wins":k<p?"Black wins":"It's a draw"]}),b&&Object(A.jsx)("div",{className:"text-center text-red-500",children:b})]})},R=function(){return Object(A.jsx)("div",{className:"m-8 flex justify-center",children:Object(A.jsx)(G,{})})};n(25);i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(R,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.0ea4d6b6.chunk.js.map